function ListController($scope,countryList){$scope.countries=countryList,console.log($scope.country)}function dataService($q,$http){function getAllCountries(){return $http({method:"GET",url:"http://api.geonames.org/countryInfoJSON?username=atoburen"}).then(sendCountries)["catch"](sendErrorMessage)}function sendCountries(response){return response.data.geonames}function sendErrorMessage(response){return $q.reject("There was an error getting the data. (HTTP status: "+response.status+")")}return{getAllCountries:getAllCountries}}var app=angular.module("app",["ngRoute"]);app.config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"partials/home.html"}).when("/countries",{templateUrl:"partials/countriesList.html",controller:"ListController",resolve:{countryList:["dataService",function(dataService){return dataService.getAllCountries()}]}}).otherwise({redirectTo:"/"})}]),app.controller("ListController",["$scope","countryList",ListController]),app.factory("dataService",["$q","$http",dataService]);