function MainController($scope,dataService){dataService.getAllCountries().then(function(result){$scope.countries=result.geonames,console.log($scope.countries)})}function dataService($q,$http){function getAllCountries(){return $http({method:"GET",url:"http://api.geonames.org/countryInfoJSON?username=demo"}).then(sendCountries)["catch"](sendErrorMessage)}function sendCountries(response){return response.data}function sendErrorMessage(response){return $q.reject("There was an error getting the data. (HTTP status: "+response.status+")")}return{getAllCountries:getAllCountries}}var app=angular.module("app",["ngRoute"]);angular.module("app").config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"partials/home.html",controller:"MainController"}).when("/countries",{templateUrl:"partials/countriesList.html",controller:"MainController"}).when("/details:country",{templateUrl:"partials/country.html",controller:"MainController"}).otherwise({redirectTo:"/"})}]),app.controller("MainController",["$scope","dataService",MainController]),app.factory("dataService",["$q","$http",dataService]);